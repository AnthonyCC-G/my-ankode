{% extends 'base.html.twig' %}

{% block title %}Dashboard Admin - MY-ANKODE{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/admin-dashboard.css') }}">
{% endblock %}

{% block body %}

{# ========================================
   HEADER TITRE DE PAGE
   ======================================== #}
<header class="admin-header">
    <h1 class="admin-title">
        <i class="bi bi-speedometer2"></i> Dashboard Administrateur
        <span class="badge bg-danger">ADMIN</span>
    </h1>
    <p class="admin-intro">
        Gestion centralisée de MY-ANKODE : statistiques, documentation API et administration
    </p>
</header>

{# ========================================
   CONTENEUR PRINCIPAL AVEC TABS
   ======================================== #}
<main class="admin-main">

    {# Messages flash #}
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        {% endfor %}
    {% endfor %}

    {# ========================================
       NAVIGATION TABS BOOTSTRAP
       ======================================== #}
    <ul class="nav nav-tabs admin-tabs" id="adminTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button 
                class="nav-link active" 
                id="stats-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#stats-content" 
                type="button" 
                role="tab" 
                aria-controls="stats-content" 
                aria-selected="true"
            >
                <i class="bi bi-bar-chart-fill"></i> Statistiques
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button 
                class="nav-link" 
                id="api-doc-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#api-doc-content" 
                type="button" 
                role="tab" 
                aria-controls="api-doc-content" 
                aria-selected="false"
            >
                <i class="bi bi-book"></i> Documentation API
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button 
                class="nav-link" 
                id="content-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#content-management" 
                type="button" 
                role="tab" 
                aria-controls="content-management" 
                aria-selected="false"
            >
                <i class="bi bi-folder"></i> Gestion Contenus
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button 
                class="nav-link" 
                id="faq-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#faq-management" 
                type="button" 
                role="tab" 
                aria-controls="faq-management" 
                aria-selected="false"
            >
                <i class="bi bi-question-circle"></i> FAQ
            </button>
        </li>
    </ul>

    {# ========================================
       CONTENU DES TABS
       ======================================== #}
    <div class="tab-content admin-tab-content" id="adminTabsContent">
        
        {# TAB 1 : STATISTIQUES (Grid 2x3 existant) #}
        <div class="tab-pane fade show active" id="stats-content" role="tabpanel" aria-labelledby="stats-tab">
            <div class="stats-grid">
                
                {# Card Utilisateurs #}
                <div class="stat-card">
                    <div class="stat-icon bg-primary-subtle">
                        <i class="bi bi-people-fill text-primary"></i>
                    </div>
                    <h3 class="stat-number" id="total-users">
                        <span class="spinner-border spinner-border-sm" role="status"></span>
                    </h3>
                    <p class="stat-label">Utilisateurs inscrits</p>
                </div>

                {# Card Projets #}
                <div class="stat-card">
                    <div class="stat-icon bg-success-subtle">
                        <i class="bi bi-kanban-fill text-success"></i>
                    </div>
                    <h3 class="stat-number" id="total-projects">
                        <span class="spinner-border spinner-border-sm" role="status"></span>
                    </h3>
                    <p class="stat-label">Projets créés</p>
                </div>

                {# Card Tâches #}
                <div class="stat-card">
                    <div class="stat-icon bg-warning-subtle">
                        <i class="bi bi-list-check text-warning"></i>
                    </div>
                    <h3 class="stat-number" id="total-tasks">
                        <span class="spinner-border spinner-border-sm" role="status"></span>
                    </h3>
                    <p class="stat-label">Tâches totales</p>
                </div>

                {# Card Articles de veille #}
                <div class="stat-card">
                    <div class="stat-icon bg-info-subtle">
                        <i class="bi bi-newspaper text-info"></i>
                    </div>
                    <h3 class="stat-number" id="total-articles">
                        <span class="spinner-border spinner-border-sm" role="status"></span>
                    </h3>
                    <p class="stat-label">Articles de veille</p>
                </div>

                {# Card Snippets #}
                <div class="stat-card">
                    <div class="stat-icon bg-secondary-subtle">
                        <i class="bi bi-code-slash text-secondary"></i>
                    </div>
                    <h3 class="stat-number" id="total-snippets">
                        <span class="spinner-border spinner-border-sm" role="status"></span>
                    </h3>
                    <p class="stat-label">Snippets de code</p>
                </div>

                {# Card Compétences #}
                <div class="stat-card">
                    <div class="stat-icon bg-danger-subtle">
                        <i class="bi bi-star-fill text-danger"></i>
                    </div>
                    <h3 class="stat-number" id="total-competences">
                        <span class="spinner-border spinner-border-sm" role="status"></span>
                    </h3>
                    <p class="stat-label">Compétences suivies</p>
                </div>

            </div>
        </div>

        {# TAB 2 : DOCUMENTATION API (iframe Nelmio) #}
        <div class="tab-pane fade" id="api-doc-content" role="tabpanel" aria-labelledby="api-doc-tab">
            <div class="api-doc-container">
                <div class="api-doc-intro">
                    <h2><i class="bi bi-book"></i> Documentation API REST</h2>
                    <p>Documentation complète de l'API MY-ANKODE générée automatiquement avec Nelmio API Doc.</p>
                </div>
                <iframe 
                    src="/api/doc" 
                    class="api-doc-iframe" 
                    title="Documentation API MY-ANKODE"
                    frameborder="0"
                ></iframe>
            </div>
        </div>

        {# TAB 3 : GESTION CONTENUS (Placeholder) #}
        <div class="tab-pane fade" id="content-management" role="tabpanel" aria-labelledby="content-tab">
            <div class="placeholder-container">
                <h2 class="placeholder-title">Gestion des Contenus</h2>
                <p class="placeholder-text">
                    Cette fonctionnalité permettra de gérer les articles de veille, snippets et autres contenus directement depuis le dashboard.
                </p>
                <div class="placeholder-badge">
                    <i class="bi bi-clock-history"></i> Feature à venir
                </div>
            </div>
        </div>

        {# TAB 4 : FAQ (Placeholder) #}
        <div class="tab-pane fade" id="faq-management" role="tabpanel" aria-labelledby="faq-tab">
            <div class="placeholder-container">
                <h2 class="placeholder-title">Gestion de la FAQ</h2>
                <p class="placeholder-text">
                    Cette section permettra de créer, modifier et organiser les questions fréquemment posées pour aider les utilisateurs.
                </p>
                <div class="placeholder-badge">
                    <i class="bi bi-clock-history"></i> Feature à venir
                </div>
            </div>
        </div>

    </div>

</main>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/admin-dashboard.js') }}"></script>
{% endblock %}